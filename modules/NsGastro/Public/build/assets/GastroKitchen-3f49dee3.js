/* empty css                      */import{g as nt}from"./gastro-kitchen-settings-c82407e2.js";var X=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function J(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Z={exports:{}},C={exports:{}},L={exports:{}},K;function M(){return K||(K=1,function(n){(function(r,s){n.exports?n.exports=s():r.EvEmitter=s()})(typeof window<"u"?window:X,function(){function r(){}var s=r.prototype;return s.on=function(c,d){if(!(!c||!d)){var a=this._events=this._events||{},u=a[c]=a[c]||[];return u.indexOf(d)==-1&&u.push(d),this}},s.once=function(c,d){if(!(!c||!d)){this.on(c,d);var a=this._onceEvents=this._onceEvents||{},u=a[c]=a[c]||{};return u[d]=!0,this}},s.off=function(c,d){var a=this._events&&this._events[c];if(!(!a||!a.length)){var u=a.indexOf(d);return u!=-1&&a.splice(u,1),this}},s.emitEvent=function(c,d){var a=this._events&&this._events[c];if(!(!a||!a.length)){a=a.slice(0),d=d||[];for(var u=this._onceEvents&&this._onceEvents[c],l=0;l<a.length;l++){var f=a[l],g=u&&u[f];g&&(this.off(c,f),delete u[f]),f.apply(this,d)}return this}},s.allOff=function(){delete this._events,delete this._onceEvents},r})}(L)),L.exports}var N={exports:{}};/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */var H;function $(){return H||(H=1,function(n){(function(r,s){n.exports?n.exports=s():r.getSize=s()})(window,function(){function s(i){var m=parseFloat(i),v=i.indexOf("%")==-1&&!isNaN(m);return v&&m}function c(){}var d=typeof console>"u"?c:function(i){console.error(i)},a=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],u=a.length;function l(){for(var i={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},m=0;m<u;m++){var v=a[m];i[v]=0}return i}function f(i){var m=getComputedStyle(i);return m||d("Style returned "+m+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),m}var g=!1,y;function p(){if(!g){g=!0;var i=document.createElement("div");i.style.width="200px",i.style.padding="1px 2px 3px 4px",i.style.borderStyle="solid",i.style.borderWidth="1px 2px 3px 4px",i.style.boxSizing="border-box";var m=document.body||document.documentElement;m.appendChild(i);var v=f(i);y=Math.round(s(v.width))==200,b.isBoxSizeOuter=y,m.removeChild(i)}}function b(i){if(p(),typeof i=="string"&&(i=document.querySelector(i)),!(!i||typeof i!="object"||!i.nodeType)){var m=f(i);if(m.display=="none")return l();var v={};v.width=i.offsetWidth,v.height=i.offsetHeight;for(var o=v.isBorderBox=m.boxSizing=="border-box",t=0;t<u;t++){var e=a[t],h=m[e],x=parseFloat(h);v[e]=isNaN(x)?0:x}var _=v.paddingLeft+v.paddingRight,E=v.paddingTop+v.paddingBottom,k=v.marginLeft+v.marginRight,z=v.marginTop+v.marginBottom,S=v.borderLeftWidth+v.borderRightWidth,O=v.borderTopWidth+v.borderBottomWidth,I=o&&y,A=s(m.width);A!==!1&&(v.width=A+(I?0:_+S));var q=s(m.height);return q!==!1&&(v.height=q+(I?0:E+O)),v.innerWidth=v.width-(_+S),v.innerHeight=v.height-(E+O),v.outerWidth=v.width+k,v.outerHeight=v.height+z,v}}return b})}(N)),N.exports}var P={exports:{}},W={exports:{}},j;function st(){return j||(j=1,function(n){(function(r,s){n.exports?n.exports=s():r.matchesSelector=s()})(window,function(){var s=function(){var c=window.Element.prototype;if(c.matches)return"matches";if(c.matchesSelector)return"matchesSelector";for(var d=["webkit","moz","ms","o"],a=0;a<d.length;a++){var u=d[a],l=u+"MatchesSelector";if(c[l])return l}}();return function(d,a){return d[s](a)}})}(W)),W.exports}var V;function ot(){return V||(V=1,function(n){(function(r,s){n.exports?n.exports=s(r,st()):r.fizzyUIUtils=s(r,r.matchesSelector)})(window,function(s,c){var d={};d.extend=function(l,f){for(var g in f)l[g]=f[g];return l},d.modulo=function(l,f){return(l%f+f)%f};var a=Array.prototype.slice;d.makeArray=function(l){if(Array.isArray(l))return l;if(l==null)return[];var f=typeof l=="object"&&typeof l.length=="number";return f?a.call(l):[l]},d.removeFrom=function(l,f){var g=l.indexOf(f);g!=-1&&l.splice(g,1)},d.getParent=function(l,f){for(;l.parentNode&&l!=document.body;)if(l=l.parentNode,c(l,f))return l},d.getQueryElement=function(l){return typeof l=="string"?document.querySelector(l):l},d.handleEvent=function(l){var f="on"+l.type;this[f]&&this[f](l)},d.filterFindElements=function(l,f){l=d.makeArray(l);var g=[];return l.forEach(function(y){if(y instanceof HTMLElement){if(!f){g.push(y);return}c(y,f)&&g.push(y);for(var p=y.querySelectorAll(f),b=0;b<p.length;b++)g.push(p[b])}}),g},d.debounceMethod=function(l,f,g){g=g||100;var y=l.prototype[f],p=f+"Timeout";l.prototype[f]=function(){var b=this[p];clearTimeout(b);var i=arguments,m=this;this[p]=setTimeout(function(){y.apply(m,i),delete m[p]},g)}},d.docReady=function(l){var f=document.readyState;f=="complete"||f=="interactive"?setTimeout(l):document.addEventListener("DOMContentLoaded",l)},d.toDashed=function(l){return l.replace(/(.)([A-Z])/g,function(f,g,y){return g+"-"+y}).toLowerCase()};var u=s.console;return d.htmlInit=function(l,f){d.docReady(function(){var g=d.toDashed(f),y="data-"+g,p=document.querySelectorAll("["+y+"]"),b=document.querySelectorAll(".js-"+g),i=d.makeArray(p).concat(d.makeArray(b)),m=y+"-options",v=s.jQuery;i.forEach(function(o){var t=o.getAttribute(y)||o.getAttribute(m),e;try{e=t&&JSON.parse(t)}catch(x){u&&u.error("Error parsing "+y+" on "+o.className+": "+x);return}var h=new l(o,e);v&&v.data(o,f,h)})})},d})}(P)),P.exports}var R={exports:{}},F;function rt(){return F||(F=1,function(n){(function(r,s){n.exports?n.exports=s(M(),$()):(r.Outlayer={},r.Outlayer.Item=s(r.EvEmitter,r.getSize))})(window,function(s,c){function d(o){for(var t in o)return!1;return t=null,!0}var a=document.documentElement.style,u=typeof a.transition=="string"?"transition":"WebkitTransition",l=typeof a.transform=="string"?"transform":"WebkitTransform",f={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[u],g={transform:l,transition:u,transitionDuration:u+"Duration",transitionProperty:u+"Property",transitionDelay:u+"Delay"};function y(o,t){o&&(this.element=o,this.layout=t,this.position={x:0,y:0},this._create())}var p=y.prototype=Object.create(s.prototype);p.constructor=y,p._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},p.handleEvent=function(o){var t="on"+o.type;this[t]&&this[t](o)},p.getSize=function(){this.size=c(this.element)},p.css=function(o){var t=this.element.style;for(var e in o){var h=g[e]||e;t[h]=o[e]}},p.getPosition=function(){var o=getComputedStyle(this.element),t=this.layout._getOption("originLeft"),e=this.layout._getOption("originTop"),h=o[t?"left":"right"],x=o[e?"top":"bottom"],_=parseFloat(h),E=parseFloat(x),k=this.layout.size;h.indexOf("%")!=-1&&(_=_/100*k.width),x.indexOf("%")!=-1&&(E=E/100*k.height),_=isNaN(_)?0:_,E=isNaN(E)?0:E,_-=t?k.paddingLeft:k.paddingRight,E-=e?k.paddingTop:k.paddingBottom,this.position.x=_,this.position.y=E},p.layoutPosition=function(){var o=this.layout.size,t={},e=this.layout._getOption("originLeft"),h=this.layout._getOption("originTop"),x=e?"paddingLeft":"paddingRight",_=e?"left":"right",E=e?"right":"left",k=this.position.x+o[x];t[_]=this.getXValue(k),t[E]="";var z=h?"paddingTop":"paddingBottom",S=h?"top":"bottom",O=h?"bottom":"top",I=this.position.y+o[z];t[S]=this.getYValue(I),t[O]="",this.css(t),this.emitEvent("layout",[this])},p.getXValue=function(o){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!t?o/this.layout.size.width*100+"%":o+"px"},p.getYValue=function(o){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&t?o/this.layout.size.height*100+"%":o+"px"},p._transitionTo=function(o,t){this.getPosition();var e=this.position.x,h=this.position.y,x=o==this.position.x&&t==this.position.y;if(this.setPosition(o,t),x&&!this.isTransitioning){this.layoutPosition();return}var _=o-e,E=t-h,k={};k.transform=this.getTranslate(_,E),this.transition({to:k,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},p.getTranslate=function(o,t){var e=this.layout._getOption("originLeft"),h=this.layout._getOption("originTop");return o=e?o:-o,t=h?t:-t,"translate3d("+o+"px, "+t+"px, 0)"},p.goTo=function(o,t){this.setPosition(o,t),this.layoutPosition()},p.moveTo=p._transitionTo,p.setPosition=function(o,t){this.position.x=parseFloat(o),this.position.y=parseFloat(t)},p._nonTransition=function(o){this.css(o.to),o.isCleaning&&this._removeStyles(o.to);for(var t in o.onTransitionEnd)o.onTransitionEnd[t].call(this)},p.transition=function(o){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(o);return}var t=this._transn;for(var e in o.onTransitionEnd)t.onEnd[e]=o.onTransitionEnd[e];for(e in o.to)t.ingProperties[e]=!0,o.isCleaning&&(t.clean[e]=!0);o.from&&(this.css(o.from),this.element.offsetHeight),this.enableTransition(o.to),this.css(o.to),this.isTransitioning=!0};function b(o){return o.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}var i="opacity,"+b(l);p.enableTransition=function(){if(!this.isTransitioning){var o=this.layout.options.transitionDuration;o=typeof o=="number"?o+"ms":o,this.css({transitionProperty:i,transitionDuration:o,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(f,this,!1)}},p.onwebkitTransitionEnd=function(o){this.ontransitionend(o)},p.onotransitionend=function(o){this.ontransitionend(o)};var m={"-webkit-transform":"transform"};p.ontransitionend=function(o){if(o.target===this.element){var t=this._transn,e=m[o.propertyName]||o.propertyName;if(delete t.ingProperties[e],d(t.ingProperties)&&this.disableTransition(),e in t.clean&&(this.element.style[o.propertyName]="",delete t.clean[e]),e in t.onEnd){var h=t.onEnd[e];h.call(this),delete t.onEnd[e]}this.emitEvent("transitionEnd",[this])}},p.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(f,this,!1),this.isTransitioning=!1},p._removeStyles=function(o){var t={};for(var e in o)t[e]="";this.css(t)};var v={transitionProperty:"",transitionDuration:"",transitionDelay:""};return p.removeTransitionStyles=function(){this.css(v)},p.stagger=function(o){o=isNaN(o)?0:o,this.staggerDelay=o+"ms"},p.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},p.remove=function(){if(!u||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}this.once("transitionEnd",function(){this.removeElem()}),this.hide()},p.reveal=function(){delete this.isHidden,this.css({display:""});var o=this.layout.options,t={},e=this.getHideRevealTransitionEndProperty("visibleStyle");t[e]=this.onRevealTransitionEnd,this.transition({from:o.hiddenStyle,to:o.visibleStyle,isCleaning:!0,onTransitionEnd:t})},p.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},p.getHideRevealTransitionEndProperty=function(o){var t=this.layout.options[o];if(t.opacity)return"opacity";for(var e in t)return e},p.hide=function(){this.isHidden=!0,this.css({display:""});var o=this.layout.options,t={},e=this.getHideRevealTransitionEndProperty("hiddenStyle");t[e]=this.onHideTransitionEnd,this.transition({from:o.visibleStyle,to:o.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},p.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},p.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},y})}(R)),R.exports}/*!
 * Outlayer v2.1.1
 * the brains and guts of a layout library
 * MIT license
 */var Y;function at(){return Y||(Y=1,function(n){(function(r,s){n.exports?n.exports=s(r,M(),$(),ot(),rt()):r.Outlayer=s(r,r.EvEmitter,r.getSize,r.fizzyUIUtils,r.Outlayer.Item)})(window,function(s,c,d,a,u){var l=s.console,f=s.jQuery,g=function(){},y=0,p={};function b(t,e){var h=a.getQueryElement(t);if(!h){l&&l.error("Bad element for "+this.constructor.namespace+": "+(h||t));return}this.element=h,f&&(this.$element=f(this.element)),this.options=a.extend({},this.constructor.defaults),this.option(e);var x=++y;this.element.outlayerGUID=x,p[x]=this,this._create();var _=this._getOption("initLayout");_&&this.layout()}b.namespace="outlayer",b.Item=u,b.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var i=b.prototype;a.extend(i,c.prototype),i.option=function(t){a.extend(this.options,t)},i._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&this.options[e]!==void 0?this.options[e]:this.options[t]},b.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},i._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),a.extend(this.element.style,this.options.containerStyle);var t=this._getOption("resize");t&&this.bindResize()},i.reloadItems=function(){this.items=this._itemize(this.element.children)},i._itemize=function(t){for(var e=this._filterFindItemElements(t),h=this.constructor.Item,x=[],_=0;_<e.length;_++){var E=e[_],k=new h(E,this);x.push(k)}return x},i._filterFindItemElements=function(t){return a.filterFindElements(t,this.options.itemSelector)},i.getItemElements=function(){return this.items.map(function(t){return t.element})},i.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=t!==void 0?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},i._init=i.layout,i._resetLayout=function(){this.getSize()},i.getSize=function(){this.size=d(this.element)},i._getMeasurement=function(t,e){var h=this.options[t],x;h?(typeof h=="string"?x=this.element.querySelector(h):h instanceof HTMLElement&&(x=h),this[t]=x?d(x)[e]:h):this[t]=0},i.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},i._getItemsForLayout=function(t){return t.filter(function(e){return!e.isIgnored})},i._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),!(!t||!t.length)){var h=[];t.forEach(function(x){var _=this._getItemLayoutPosition(x);_.item=x,_.isInstant=e||x.isLayoutInstant,h.push(_)},this),this._processLayoutQueue(h)}},i._getItemLayoutPosition=function(){return{x:0,y:0}},i._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(e,h){this._positionItem(e.item,e.x,e.y,e.isInstant,h)},this)},i.updateStagger=function(){var t=this.options.stagger;if(t==null){this.stagger=0;return}return this.stagger=o(t),this.stagger},i._positionItem=function(t,e,h,x,_){x?t.goTo(e,h):(t.stagger(_*this.stagger),t.moveTo(e,h))},i._postLayout=function(){this.resizeContainer()},i.resizeContainer=function(){var t=this._getOption("resizeContainer");if(t){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},i._getContainerSize=g,i._setContainerMeasure=function(t,e){if(t!==void 0){var h=this.size;h.isBorderBox&&(t+=e?h.paddingLeft+h.paddingRight+h.borderLeftWidth+h.borderRightWidth:h.paddingBottom+h.paddingTop+h.borderTopWidth+h.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},i._emitCompleteOnItems=function(t,e){var h=this;function x(){h.dispatchEvent(t+"Complete",null,[e])}var _=e.length;if(!e||!_){x();return}var E=0;function k(){E++,E==_&&x()}e.forEach(function(z){z.once(t,k)})},i.dispatchEvent=function(t,e,h){var x=e?[e].concat(h):h;if(this.emitEvent(t,x),f)if(this.$element=this.$element||f(this.element),e){var _=f.Event(e);_.type=t,this.$element.trigger(_,h)}else this.$element.trigger(t,h)},i.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},i.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},i.stamp=function(t){t=this._find(t),t&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},i.unstamp=function(t){t=this._find(t),t&&t.forEach(function(e){a.removeFrom(this.stamps,e),this.unignore(e)},this)},i._find=function(t){if(t)return typeof t=="string"&&(t=this.element.querySelectorAll(t)),t=a.makeArray(t),t},i._manageStamps=function(){!this.stamps||!this.stamps.length||(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},i._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},i._manageStamp=g,i._getElementOffset=function(t){var e=t.getBoundingClientRect(),h=this._boundingRect,x=d(t),_={left:e.left-h.left-x.marginLeft,top:e.top-h.top-x.marginTop,right:h.right-e.right-x.marginRight,bottom:h.bottom-e.bottom-x.marginBottom};return _},i.handleEvent=a.handleEvent,i.bindResize=function(){s.addEventListener("resize",this),this.isResizeBound=!0},i.unbindResize=function(){s.removeEventListener("resize",this),this.isResizeBound=!1},i.onresize=function(){this.resize()},a.debounceMethod(b,"onresize",100),i.resize=function(){!this.isResizeBound||!this.needsResizeLayout()||this.layout()},i.needsResizeLayout=function(){var t=d(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},i.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},i.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},i.prepended=function(t){var e=this._itemize(t);if(e.length){var h=this.items.slice(0);this.items=e.concat(h),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(h)}},i.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),!(!t||!t.length)){var e=this.updateStagger();t.forEach(function(h,x){h.stagger(x*e),h.reveal()})}},i.hide=function(t){if(this._emitCompleteOnItems("hide",t),!(!t||!t.length)){var e=this.updateStagger();t.forEach(function(h,x){h.stagger(x*e),h.hide()})}},i.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},i.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},i.getItem=function(t){for(var e=0;e<this.items.length;e++){var h=this.items[e];if(h.element==t)return h}},i.getItems=function(t){t=a.makeArray(t);var e=[];return t.forEach(function(h){var x=this.getItem(h);x&&e.push(x)},this),e},i.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),!(!e||!e.length)&&e.forEach(function(h){h.remove(),a.removeFrom(this.items,h)},this)},i.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(h){h.destroy()}),this.unbindResize();var e=this.element.outlayerGUID;delete p[e],delete this.element.outlayerGUID,f&&f.removeData(this.element,this.constructor.namespace)},b.data=function(t){t=a.getQueryElement(t);var e=t&&t.outlayerGUID;return e&&p[e]},b.create=function(t,e){var h=m(b);return h.defaults=a.extend({},b.defaults),a.extend(h.defaults,e),h.compatOptions=a.extend({},b.compatOptions),h.namespace=t,h.data=b.data,h.Item=m(u),a.htmlInit(h,t),f&&f.bridget&&f.bridget(t,h),h};function m(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}var v={ms:1,s:1e3};function o(t){if(typeof t=="number")return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),h=e&&e[1],x=e&&e[2];if(!h.length)return 0;h=parseFloat(h);var _=v[x]||1;return h*_}return b.Item=u,b})}(C)),C.exports}/*!
 * Masonry v4.2.2
 * Cascading grid layout library
 * https://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */(function(n){(function(r,s){n.exports?n.exports=s(at(),$()):r.Masonry=s(r.Outlayer,r.getSize)})(window,function(s,c){var d=s.create("masonry");d.compatOptions.fitWidth="isFitWidth";var a=d.prototype;return a._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var u=0;u<this.cols;u++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},a.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var u=this.items[0],l=u&&u.element;this.columnWidth=l&&c(l).outerWidth||this.containerWidth}var f=this.columnWidth+=this.gutter,g=this.containerWidth+this.gutter,y=g/f,p=f-g%f,b=p&&p<1?"round":"floor";y=Math[b](y),this.cols=Math.max(y,1)},a.getContainerWidth=function(){var u=this._getOption("fitWidth"),l=u?this.element.parentNode:this.element,f=c(l);this.containerWidth=f&&f.innerWidth},a._getItemLayoutPosition=function(u){u.getSize();var l=u.size.outerWidth%this.columnWidth,f=l&&l<1?"round":"ceil",g=Math[f](u.size.outerWidth/this.columnWidth);g=Math.min(g,this.cols);for(var y=this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition",p=this[y](g,u),b={x:this.columnWidth*p.col,y:p.y},i=p.y+u.size.outerHeight,m=g+p.col,v=p.col;v<m;v++)this.colYs[v]=i;return b},a._getTopColPosition=function(u){var l=this._getTopColGroup(u),f=Math.min.apply(Math,l);return{col:l.indexOf(f),y:f}},a._getTopColGroup=function(u){if(u<2)return this.colYs;for(var l=[],f=this.cols+1-u,g=0;g<f;g++)l[g]=this._getColGroupY(g,u);return l},a._getColGroupY=function(u,l){if(l<2)return this.colYs[u];var f=this.colYs.slice(u,u+l);return Math.max.apply(Math,f)},a._getHorizontalColPosition=function(u,l){var f=this.horizontalColIndex%this.cols,g=u>1&&f+u>this.cols;f=g?0:f;var y=l.size.outerWidth&&l.size.outerHeight;return this.horizontalColIndex=y?f+u:this.horizontalColIndex,{col:f,y:this._getColGroupY(f,u)}},a._manageStamp=function(u){var l=c(u),f=this._getElementOffset(u),g=this._getOption("originLeft"),y=g?f.left:f.right,p=y+l.outerWidth,b=Math.floor(y/this.columnWidth);b=Math.max(0,b);var i=Math.floor(p/this.columnWidth);i-=p%this.columnWidth?0:1,i=Math.min(this.cols-1,i);for(var m=this._getOption("originTop"),v=(m?f.top:f.bottom)+l.outerHeight,o=b;o<=i;o++)this.colYs[o]=Math.max(v,this.colYs[o])},a._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var u={height:this.maxY};return this._getOption("fitWidth")&&(u.width=this._getContainerFitWidth()),u},a._getContainerFitWidth=function(){for(var u=0,l=this.cols;--l&&this.colYs[l]===0;)u++;return(this.cols-u)*this.columnWidth-this.gutter},a.needsResizeLayout=function(){var u=this.containerWidth;return this.getContainerWidth(),u!=this.containerWidth},d})})(Z);var ct=Z.exports;const U=J(ct);var tt={exports:{}};/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */(function(n){(function(r,s){n.exports?n.exports=s(r,M()):r.imagesLoaded=s(r,r.EvEmitter)})(typeof window<"u"?window:X,function(s,c){var d=s.jQuery,a=s.console;function u(i,m){for(var v in m)i[v]=m[v];return i}var l=Array.prototype.slice;function f(i){if(Array.isArray(i))return i;var m=typeof i=="object"&&typeof i.length=="number";return m?l.call(i):[i]}function g(i,m,v){if(!(this instanceof g))return new g(i,m,v);var o=i;if(typeof i=="string"&&(o=document.querySelectorAll(i)),!o){a.error("Bad element for imagesLoaded "+(o||i));return}this.elements=f(o),this.options=u({},this.options),typeof m=="function"?v=m:u(this.options,m),v&&this.on("always",v),this.getImages(),d&&(this.jqDeferred=new d.Deferred),setTimeout(this.check.bind(this))}g.prototype=Object.create(c.prototype),g.prototype.options={},g.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},g.prototype.addElementImages=function(i){i.nodeName=="IMG"&&this.addImage(i),this.options.background===!0&&this.addElementBackgroundImages(i);var m=i.nodeType;if(!(!m||!y[m])){for(var v=i.querySelectorAll("img"),o=0;o<v.length;o++){var t=v[o];this.addImage(t)}if(typeof this.options.background=="string"){var e=i.querySelectorAll(this.options.background);for(o=0;o<e.length;o++){var h=e[o];this.addElementBackgroundImages(h)}}}};var y={1:!0,9:!0,11:!0};g.prototype.addElementBackgroundImages=function(i){var m=getComputedStyle(i);if(m)for(var v=/url\((['"])?(.*?)\1\)/gi,o=v.exec(m.backgroundImage);o!==null;){var t=o&&o[2];t&&this.addBackground(t,i),o=v.exec(m.backgroundImage)}},g.prototype.addImage=function(i){var m=new p(i);this.images.push(m)},g.prototype.addBackground=function(i,m){var v=new b(i,m);this.images.push(v)},g.prototype.check=function(){var i=this;if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length){this.complete();return}function m(v,o,t){setTimeout(function(){i.progress(v,o,t)})}this.images.forEach(function(v){v.once("progress",m),v.check()})},g.prototype.progress=function(i,m,v){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!i.isLoaded,this.emitEvent("progress",[this,i,m]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,i),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+v,i,m)},g.prototype.complete=function(){var i=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(i,[this]),this.emitEvent("always",[this]),this.jqDeferred){var m=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[m](this)}};function p(i){this.img=i}p.prototype=Object.create(c.prototype),p.prototype.check=function(){var i=this.getIsImageComplete();if(i){this.confirm(this.img.naturalWidth!==0,"naturalWidth");return}this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src},p.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},p.prototype.confirm=function(i,m){this.isLoaded=i,this.emitEvent("progress",[this,this.img,m])},p.prototype.handleEvent=function(i){var m="on"+i.type;this[m]&&this[m](i)},p.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},p.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},p.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)};function b(i,m){this.url=i,this.element=m,this.img=new Image}return b.prototype=Object.create(p.prototype),b.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var i=this.getIsImageComplete();i&&(this.confirm(this.img.naturalWidth!==0,"naturalWidth"),this.unbindEvents())},b.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},b.prototype.confirm=function(i,m){this.isLoaded=i,this.emitEvent("progress",[this,this.element,m])},g.makeJQueryPlugin=function(i){i=i||s.jQuery,i&&(d=i,d.fn.imagesLoaded=function(m,v){var o=new g(this,m,v);return o.jqDeferred.promise(d(this))})},g.makeJQueryPlugin(),g})})(tt);var lt=tt.exports;const dt=J(lt);/**
* @vue/shared v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Q;const ht=()=>Q||(Q=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});/**
* @vue/runtime-core v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const ut=Promise.resolve();let ft=null;function pt(n){const r=ft||ut;return n?r.then(this?n.bind(this):n):r}{const n=ht(),r=(s,c)=>{let d;return(d=n[s])||(d=n[s]=[]),d.push(c),a=>{d.length>1?d.forEach(u=>u(a)):d[0](a)}};r("__VUE_INSTANCE_SETTERS__",s=>s),r("__VUE_SSR_SETTERS__",s=>s)}function et(n){return{all:n=n||new Map,on:function(r,s){var c=n.get(r);c?c.push(s):n.set(r,[s])},off:function(r,s){var c=n.get(r);c&&(s?c.splice(c.indexOf(s)>>>0,1):n.set(r,[]))},emit:function(r,s){var c=n.get(r);c&&c.slice().map(function(d){d(s)}),(c=n.get("*"))&&c.slice().map(function(d){d(r,s)})}}}const T={"column-width":"columnWidth","transition-duration":"transitionDuration","item-selector":"itemSelector","origin-left":"originLeft","origin-top":"originTop","fit-width":"fitWidth",stamp:"stamp",gutter:"gutter","percent-position":"percentPosition","horizontal-order":"horizontalOrder",stagger:"stagger","destroy-delay":"destroyDelay"},w="vuemasonry.itemAdded",G="vuemasonry.itemRemoved",B="vuemasonry.imageLoaded",D="vuemasonry.destroy",gt=function(n){return(n+"").toLowerCase()==="true"},mt=function(n){return isNaN(n)?n:parseInt(n)},vt=function(n){const r={};return Array.prototype.slice.call(n).forEach(function(c){Object.keys(T).indexOf(c.name)>-1&&(c.name.indexOf("origin")>-1?r[T[c.name]]=gt(c.value):c.name==="column-width"||c.name==="gutter"?r[T[c.name]]=mt(c.value):r[T[c.name]]=c.value)}),r},it={};it.install=function(n,r){const s=et(),c="VueMasonry",d=n;d.directive("masonry",{props:["transitionDuration"," itemSelector","destroyDelay"],mounted:function(a,u){if(!U)throw new Error("Masonry plugin is not defined. Please check it's connected and parsed correctly.");const l=vt(a.attributes),f=new U(a,l),g=u.value||c,y=l.destroyDelay?parseInt(l.destroyDelay,10):void 0,p=function(){f.reloadItems(),f.layout()};pt(()=>{p()});const b=function(m){p()},i=function(m){s["off"](`${w}__${g}`,b),s["off"](`${G}__${g}`,b),s["off"](`${B}__${g}`,b),s["off"](`${D}__${g}`,i);const v=y&&!Number.isNaN(y)?y:0;setTimeout(function(){f.destroy()},v)};s["on"](`${w}__${g}`,b),s["on"](`${G}__${g}`,b),s["on"](`${B}__${g}`,b),s["on"](`${D}__${g}`,i)},unbind:function(a,u){const l=u.value||c;s["emit"](`${D}__${l}`)}}),d.directive("masonryTile",{mounted:function(a,u){const l=u.value||c;s["emit"](`${w}__${l}`,{element:a}),new dt(a,function(){s["emit"](`${B}__${l}`,{element:a})})},unbind:function(a,u){const l=u.value||c;s["emit"](`${G}__${l}`,{element:a})}});{const a=function(u){const l=u||c;s["emit"](`${w}__${l}`)};n.config.globalProperties.$redrawVueMasonry=a,n.provide("redrawVueMasonry",a)}};const yt={name:"gastro-kitchen-requested-orders",template:`
    <div class="shadow-lg flex flex-col ns-box w-95vw h-95vh md:w-3/5-screen md:h-4/5-screen">
        <div class="ns-box-header border-b popup-heading">
            <h3>{{ localization( 'Requested Orders', 'NsGastro' ) }}</h3>
            <div>
                <ns-close-button @click="popupResolver( false )"></ns-close-button>
            </div>
        </div>
        <div v-if="orders.length === 0" class="flex items-center justify-center flex-auto ns-box-body">
            <div class="flex flex-col items-center justify-center">
                <i class="go-text-9xl las la-frown"></i>
                <div class="flex flex-col items-center">
                    <h3 class="font-semibold text-lg">{{ localization( 'No requested order has been found.', 'NsGastro' ) }}</h3>
                    <span class="text-sm">{{ localization( 'No order has been requested to be served.', 'NsGastro' ) }}</span>
                </div>
            </div>
        </div>
        <div class="p-2" v-if="orders.length > 0">
            <ul>
                <li v-for="order of orders" :key="order.id" class="border-b-2 border-blue-400 p-2 flex justify-between">
                    <div>
                        <h3 class="font-semibold">{{ order.order_code }} &mdash; {{ order.order_title || this.localization( 'Unnamed Order', 'NsGastro' ) }}</h3>
                        <div class="-mx-2 flex flex-wrap">
                            <div class="px-2 text-sm text-gray-600">
                                {{ localization( 'Table', 'NsGastro' ) }} : {{ order.table_name || this.localization( 'N/A', 'NsGastro' ) }}
                            </div>
                        </div>
                    </div>
                    <div>
                        <button v-if="order.gastro_order_status === 'requested'" @click="setOrderAsProcessed( order )" class="bg-green-400 text-white rounded-full px-4 py-2">{{ localization( 'Okay', 'NsGastro' ) }}</button>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    `,data(){return{orders:[]}},props:["popup"],methods:{localization:__m,popupCloser,popupResolver,orders:[],setOrderAsProcessed(n){nsHttpClient.post(`/api/gastro/orders/${n.order_id}/cooking-status`,{status:"processed"}).subscribe(r=>(this.loadRequestedOrders(),nsSnackBar.success(r.message,this.localization("Okay","NsGastro"),{duration:3e3}).subscribe()))},loadRequestedOrders(){nsHttpClient.post(`/api/gastro/kitchens/${this.popup.params.kitchen.id}/orders`,{cooking_status:["requested"]}).subscribe(n=>{this.orders=n})}},mounted(){this.loadRequestedOrders()}},bt={name:"gastro-kitchen-select",template:`
    <div class="bg-lg w-95vw max-h md:w-3/5-screen lg:w-2/5-screen ns-box">
        <div id="header" class="p-2 border-b ns-box-header flex justify-between">
            <h3 class="font-semibold">{{ localization( 'Kitchens', 'NsGastro' ) }}</h3>
            <div>
                <ns-close-button @click="closePopup()"></ns-close-button>
            </div>
        </div>
        <div class="h-44 flex items-center justify-center py-10" v-if="! loaded">
            <ns-spinner></ns-spinner>
        </div>
        <div  v-if="loaded && kitchens.length === 0" class="flex-auto flex flex-col items-center justify-center h-72 py-10">
            <i class="las la-frown text-6xl"></i>
            <h3 class="text-sm">{{ localization( 'Looks like there is no kitchens.', 'NsGastro' ) }}</h3>
        </div>
        <div class="grid grid-cols-2 md:grid-cols-3" v-if="loaded && kitchens.length > 0">
            <div @click="selectKitchen( kitchen )" v-for="kitchen of kitchens" :key="kitchen.id" class="border ns-numpad-key flex items-center justify-center flex-col p-3 cursor-pointer h-48">
                <h3 class="font-semibold text-primary">{{ kitchen.name }}</h3>
                <p class="text-sm text-secondary px-4 text-center">{{ kitchen.description || this.localization( 'No description provided', 'NsGastro' ) }}</p>
            </div>
        </div>
    </div>
    `,props:["popup"],data(){return{kitchens:[],loaded:!1}},computed:{selectedKitchen(){const n=this.kitchens.filter(r=>r.selected);return n.length>0?n[0]:!1}},mounted(){this.loadKitchens()},methods:{localization:__m,closePopup(){this.popup.params.reject(!1),this.popup.close()},selectKitchen(n){const r=this.kitchens.indexOf(n);this.kitchens.forEach((s,c)=>{c!==r?s.selected=!1:s.selected=!0}),console.log(this.selectedKitchen),this.popup.params.resolve(this.selectedKitchen),this.popup.close()},loadKitchens(){this.loaded=!1,nsHttpClient.get("/api/gastro/available-kitchens").subscribe(n=>{this.kitchens=n.map(r=>(r.selected=!1,r.range_starts=ns.date.moment.startOf("day"),r.range_ends=ns.date.moment.endOf("day"),r.refresh_interval="5000",r)),this.loaded=!0},n=>{nsSnackBar.error(n.message||this.localization("Unexpected error occured","NsGastro")).subscribe()})}}},xt={name:"gastro-kitchen",template:`
    <div id="kitchen-app" class="flex-auto overflow-hidden flex flex-col">
        <div class="px-4">
            <div class="page-inner-header mb-4">
                <h3 class="text-primary font-bold flex items-center justify-between">
                    <span class="text-xl md:text-3xl">{{ selectedKitchen ? selectedKitchen.name : this.localization( 'Unknown Kitchen', 'NsGastro' ) }}</span>
                    <div class="flex">
                        <div class="mr-2 flex items-center justify-center" v-if="ns_gastro_enable_table_sessions">
                            <div class="ns-button hover-info">
                                <button @click="openRequestedOrders()" class="cursor-pointer flex px-3 h-10 hover:border-transparent rounded-full border items-center justify-center p-2">
                                    <i class="text-3xl las la-bell"></i>
                                    <span class="flex items-center justify-center h-6 w-6 rounded-full">
                                        <span class="text-xs">{{ totalRequestedOrders }}</span>
                                    </span>
                                </button>
                            </div>
                        </div>
                        <div class="mr-2 flex items-center justify-center">
                            <div class="ns-button hover-error">
                                <button @click="exitKitchen()" class="flex px-3 h-10 hover:border-transparent rounded-full border items-center justify-center p-2">
                                    <i class="text-3xl las la-door-open"></i>
                                    <span class="hidden md:inline">
                                    {{ localization( 'Exit Kitchen', 'NsGastro' ) }}
                                    </span>
                                </button>
                            </div>
                        </div>
                        <div class="mr-2 flex items-center justify-center">
                            <div class="ns-button hover-info">
                                <button @click="openOptions()" class="flex h-10 w-10 hover:border-transparent hover:shadow-lg rounded-full border items-center justify-center p-2">
                                    <i class="text-3xl las la-cog"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </h3>
                <p class="text-secondary">{{ selectedKitchen && selectedKitchen.description ? selectedKitchen.description : this.localization( 'No description is provided.', 'NsGastro' ) }}</p>
            </div>
        </div>
        <div v-if="orders.length === 0" class="flex flex-auto justify-center items-center flex-col text-primary">
            <i class="text-4xl las la-laugh-wink"></i>
            <span>{{ localization( 'Looks like there is nothing to worry about.', 'NsGastro' ) }}</span>
        </div>
        <div class="overflow-y-auto flex-auto" v-if="orders.length > 0">
            <div 
                v-masonry="'masonry-container'" 
                transition-duration="0.3s" 
                item-selector=".item"> <!-- flex flex-wrap -->

                <div v-masonry-tile 
                    class="item w-full md:w-1/2 px-2 lg:w-1/3 xl:w-1/4" 
                    :key="order.order_id" v-for="order of orders"> 

                    <div class="w-full mb-4"
                        :id="'order-' + order.order_id" >
                        <div class="shadow rounded ns-box overflow-hidden">
                            <div class="border-b ns-box-header flex justify-between p-2 items-center">
                                <h3 class="font-bold">#{{ order.order_code }}</h3>
                                <span :info="order.created_at">{{ order.humanDate }}</span>
                            </div>
                            <div class="grid grid-cols-2 text-sm">
                                <div class="p-1">
                                    <strong>{{ localization( 'Table', 'NsGastro' ) }}</strong> : {{ order.table_name || this.localization( 'N/A', 'NsGastro' ) }}
                                </div>
                                <div class="p-1">
                                    <strong>{{ localization( 'Type', 'NsGastro' ) }}</strong> : {{ getOrderType( order.order_type ) }}
                                </div>
                                <div class="p-1">
                                    <strong>{{ localization( 'Name', 'NsGastro' ) }}</strong> : {{ order.order_title || this.localization( 'N/A', 'NsGastro' ) }}
                                </div>
                            </div>
                            <div class="body">
                                <ul class="">
                                    <template :key="product.id" v-for="product of order.products">
                                        <li 
                                            :class="getCookingStatusBg( product )"
                                            @click="selectMeal( product )"
                                            class="p-2 border-b border-box-elevation-edge flex justify cursor-pointer">
                                            <div class="flex-auto">
                                                <h4>{{ product.name }} (x{{ product.quantity }})</h4>
                                                <small class="">{{ localization( 'Unit :', 'NsGastro' ) }} {{ product.unit_name}}</small>
                                                <ul class="w-full " v-if="product.modifiers.length > 0">
                                                    <li v-for="modifier of product.modifiers" :key="modifier.id" class="p-1 text-sm border-dashed border-b"><i class="las la-arrow-right"></i> {{ modifier.name }} (x{{ modifier.quantity }})</li>
                                                </ul>
                                                <p v-if="product.cooking_note && product.cooking_note.length > 0" class="mt-2 border border-dashed p-1 text-sm">
                                                    <i class="las la-hand-point-right"></i> {{ localization( 'Note:', 'NsGastro' ) }} {{ product.cooking_note }}
                                                </p>
                                            </div>
                                            <div class="flex-shrink-0">
                                                <span v-if="product.cooking_status === 'pending'" class="text-xs rounded-full px-3 py-1 go-bg-yellow-500 text-white">{{ localization( 'Pending', 'NsGastro' ) }}</span>
                                                <span v-if="product.cooking_status === 'ongoing'" class="text-xs rounded-full px-3 py-1 go-bg-blue-500 text-white">{{ localization( 'Ongoing', 'NsGastro' ) }}</span>
                                                <span v-if="product.cooking_status === 'ready'" class="text-xs rounded-full px-3 py-1 go-bg-green-500 text-white">{{ localization( 'Ready', 'NsGastro' ) }}</span>
                                                <span v-if="product.cooking_status === 'canceled'" class="text-xs rounded-full px-3 py-1 go-bg-red-500 text-white">{{ localization( 'Canceled', 'NsGastro' ) }}</span>
                                            </div>
                                        </li>
                                    </template>
                                </ul>
                            </div>
                            <div class="flex">
                                <button @click="toggleSelect( order )" class="flex-auto w-1/2 text-gray-700 py-2 font-semibold"><i class="las la-hand-pointer"></i></button>
                                <button v-if="allAreSimilar( order.products ) && ( cookingPending( order.products ) || cookingOngoing( order.products ) )" @click="cancel( order )" class="flex-auto w-1/2 go-bg-red-500 text-white py-2 font-semibold">{{ localization( 'Cancel', 'NsGastro' ) }}</button>
                                <button v-if="allAreSimilar( order.products ) && cookingPending( order.products )" @click="cook( order )" class="flex-auto w-1/2 go-bg-green-500 text-white py-2 font-semibold">{{ localization( 'Start', 'NsGastro' ) }}</button>
                                <button v-if="allAreSimilar( order.products ) && cookingOngoing( order.products )" @click="ready( order )" class="flex-auto w-1/2 go-bg-teal-500 text-white py-2 font-semibold">{{ localization( 'Ready', 'NsGastro' ) }}</button>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>
    `,data(){return{kitchen:null,selectedKitchen:null,kitchenInterval:null,interval:5e3,totalRequestedOrders:0,orders:[],settings:{range_starts:ns.date.moment.startOf("day").format(),range_ends:ns.date.moment.endOf("day").format(),enable_notification:!0},dateInterval:null,...GastroSettings}},mounted(){if(this.kitchen===null&&(nsState.setState({sidebar:"hidden"}),this.selectKitchen()),ns.date.timeZone==="")return nsSnackBar.error(this.localization("The timezone is not defined. Please consider configuring the timezone on the general settings","NsGastro"),this.localization("Ok","NsGastro"),{duration:1e4}).subscribe();nsState.behaviorState.subscribe(({object:n})=>{setTimeout(()=>this.$redrawVueMasonry("masonry-container"),100)})},methods:{localization:__m,async openOptions(){try{const n=await new Promise((r,s)=>{Popup.show(nt,{fields:[{type:"datetimepicker",name:"range_starts",label:this.localization("Start Range","NsGastro"),value:this.settings.range_starts,description:this.localization("Define when from which moment the kitchen should start fetching orders","NsGastro")},{type:"datetimepicker",name:"range_ends",label:this.localization("End Range","NsGastro"),value:this.settings.range_ends,description:this.localization("Define till which moment the kitchen should stop fetching orders","NsGastro")}],resolve:r,reject:s,settings:this.settings,title:this.localization("Kitchen Settings","NsGastro")})});for(let r in n)this.settings[r]=n[r]}catch{}},async selectKitchen(){try{this.selectedKitchen=await new Promise((n,r)=>{Popup.show(bt,{resolve:n,reject:r})}),this.getOrders(),this.startKitchen(),this.dateInterval=setInterval(()=>{this.orders.forEach(n=>{n.humanDate=this.getTimeSpan(n.order_updated_at)})},1e3)}catch(n){console.log(n)}},getTimeSpan(n){return moment(n).from(ns.date.getNowString())},openRequestedOrders(){try{if(this.selectedKitchen===null)return nsSnackBar.error(this.localization("Consider opening a kitchen first","NsGastro")).subscribe();const n=new Promise((r,s)=>{Popup.show(yt,{resolve:r,reject:s,kitchen:this.selectedKitchen})})}catch(n){console.log(n)}},getOrderType(n){switch(n){case"dine-in":return this.localization("Dine In","NsGastro");case"takeaway":return this.localization("Take Away","NsGastro");case"delivery":return this.localization("Delivery","NsGastro");default:return this.localization("Unknown Type","NsGastro")}},toggleSelect(n,r=void 0){n.products.forEach(s=>{s.selected=r===void 0?!s.selected:r})},selectMeal(n){n.selected=!n.selected},cookingPending(n){const r=n.filter(c=>c.selected).map(c=>c.cooking_status),s=[...new Set(r)];return["pending"].includes(s[0])},cookingFinished(n){const r=n.filter(c=>c.selected).map(c=>c.cooking_status),s=[...new Set(r)];return["ready"].includes(s[0])},cookingOngoing(n){const r=n.filter(c=>c.selected).map(c=>c.cooking_status),s=[...new Set(r)];return["ongoing"].includes(s[0])},allAreSimilar(n){const r=n.filter(c=>c.selected).map(c=>c.cooking_status);return[...new Set(r)].length===1},async cancel(n){try{const r=await new Promise((s,c)=>{Popup.show(nsPromptPopup,{resolve:s,reject:c,title:this.localization("Confirm Your Action","NsGastro"),message:this.localization("Would you like to cancel {items} selected items(s). Please give a reason","NsGastro").replace("{items}",n.products.filter(d=>d.selected).length),onAction:d=>{if(typeof d=="string")return console.log("foo"),nsHttpClient.post(`/api/gastro/kitchens/${this.selectedKitchen.id}/cancel/${n.order_id}`,{reason:d,products:n.products.filter(a=>a.selected).map(a=>a.id)}).subscribe(a=>{nsSnackBar.success(a.message).subscribe(),n.products.filter(u=>u.selected).forEach(u=>u.cooking_status="canceled"),this.refreshOrder(n,a.data.order),this.toggleSelect(n,!1)},a=>nsSnackBar.error(a.message||this.localization("An unexpected error has occured.","NsGastro")).subscribe())}})})}catch(r){console.log(r)}},cook(n){if(n.products.filter(s=>s.selected).length===0)return nsSnackBar.error(this.localization("Please select a meal before proceeding.","NsGastro")).subscribe();nsHttpClient.post(`/api/gastro/kitchens/${this.selectedKitchen.id}/cook/${n.order_id}`,{products:n.products.filter(s=>s.selected).map(s=>s.id)}).subscribe(s=>{nsSnackBar.success(s.message).subscribe(),n.products.filter(c=>c.selected).forEach(c=>c.cooking_status="ongoing"),this.refreshOrder(n,s.data.order),this.toggleSelect(n,!1)},s=>{nsSnackBar.error(s.message||this.localization("Unexpected error occured.","NsGastro")).subscribe()})},ready(n){if(n.products.filter(s=>s.selected).length===0)return nsSnackBar.error(this.localization("Please select a meal before proceeding.","NsGastro")).subscribe();nsHttpClient.post(`/api/gastro/kitchens/${this.selectedKitchen.id}/ready/${n.order_id}`,{products:n.products.filter(s=>s.selected).map(s=>s.id)}).subscribe(s=>{nsSnackBar.success(s.message).subscribe(),n.products.filter(c=>c.selected).forEach(c=>c.cooking_status="ready"),this.refreshOrder(n,s.data.order),this.toggleSelect(n,!1)},s=>{nsSnackBar.error(s.message||this.localization("Unexpected error occured.","NsGastro")).subscribe()})},refreshOrder(n,r){if(delete r.products,n=Object.assign(n,r),["ready","served"].includes(n.gastro_order_status)){const s=document.querySelector("#order-"+n.order_id),c=document.querySelector("#order-"+n.order_id).cloneNode(!0);s.parentNode.replaceChild(c,s),c.classList.add("anim-duration-500","zoom-in-exit"),setTimeout(()=>{c.remove(),this.$redrawVueMasonry("masonry-container")},500)}},countRequestedOrders(){this.ns_gastro_enable_table_sessions&&nsHttpClient.get(`/api/gastro/kitchens/${this.selectedKitchen.id}/orders/count-requested`).subscribe(n=>{this.totalRequestedOrders=n.count})},getCookingStatusBg(n){let r="";switch(n.cooking_status){case"pending":r="item-yellow";break;case"ongoing":r="item-blue";break;case"ready":r="item-green";break;case"canceled":r="item-red";break}return n.selected?"meal-selected":r},startKitchen(){this.selectedKitchen!==null&&(this.kitchenInterval=setInterval(()=>{this.getOrders(),this.countRequestedOrders()},this.interval))},exitKitchen(){Popup.show(nsConfirmPopup,{title:this.localization("Exit the kitchen ?","NsGastro"),message:this.localization("You'll no longer be able to manage the meals.","NsGastro"),onAction:n=>{n&&(clearInterval(this.kitchenInterval),this.orders=[],this.selectedKitchen=null,this.selectKitchen(),clearInterval(this.dateInterval))}})},playKitchenSound(n){n.notification_status==="enabled"&&new Audio(n.notification_sound).play()},getOrders(){nsHttpClient.post(`/api/gastro/kitchens/${this.selectedKitchen.id}/orders`,{cooking_status:["pending","ongoing","canceled"],range_starts:this.settings.range_starts,range_ends:this.settings.range_ends}).subscribe(n=>{if(n=n.filter(r=>r.products.length>0),this.orders.length===0)n.forEach(r=>{r.humanDate=this.getTimeSpan(r.order_updated_at),r.products.forEach(s=>{s.selected=!1,s.refreshed=0})}),this.orders=n,setTimeout(()=>this.$redrawVueMasonry("masonry-container"),100);else{this.orders.filter(d=>!n.map(a=>a.order_id).includes(d.order_id)).forEach(d=>{const a=this.orders.indexOf(d);this.orders.splice(a,1)});const r=this.orders.map(d=>d.order_id),s=n.filter(d=>r.includes(d.order_id));this.orders.forEach(d=>{const a=s.filter(u=>u.order_id===d.order_id);if(a.length===1){const u=JSON.parse(JSON.stringify(d.products));d.products.filter(y=>!a[0].products.map(p=>p.id).includes(y.id)).forEach(y=>{const p=d.products.indexOf(y);d.products.splice(p,1)});const l=u.map(y=>y.id),f=a[0].products.filter(y=>l.includes(y.id));d.products=d.products.map(y=>{const p=y.selected,b=y.refreshed;return y=f.filter(i=>i.id===y.id)[0],y.selected=p,y.refreshed=b+1,y});const g=a[0].products.filter(y=>!l.includes(y.id)).map(y=>(y.selected=!1,y));d.products.unshift(...g),g.length>0&&this.playKitchenSound(this.selectedKitchen),delete a[0].products,d=Object.assign(d,a[0])}});const c=n.filter(d=>!r.includes(d.order_id));c.length>0&&(c.forEach(d=>{d.products.forEach(a=>{a.selected=!1,a.refreshed=0}),d.humanDate=this.getTimeSpan(d.order_updated_at)}),this.orders.unshift(...c),c.length>0&&this.playKitchenSound(this.selectedKitchen)),setTimeout(()=>this.$redrawVueMasonry("masonry-container"),100)}})}}};nsExtraComponents["gastro-kitchen"]=xt;nsHooks.addAction("ns-before-mount","gastro-mount",()=>{const n=et();nsDashboardContent.config.globalProperties.emitter=n,nsDashboardContent.use(it)});
