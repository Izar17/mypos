var h=Object.defineProperty;var a=(l,e,t)=>e in l?h(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var c=(l,e,t)=>(a(l,typeof e!="symbol"?e+"":e,t),t);class u{constructor(){c(this,"listeners",new Object);document.addEventListener("keydown",e=>this.processEvent(e))}processEvent(e){for(let t in this.listeners){const i=this.listeners[t].getConfig();i.hidden.length>0&&i.hidden.filter(n=>!(n instanceof HTMLElement)&&document.querySelector(n)===null).length!==i.hidden.length||i.visible.length>0&&!(i.visible.filter(n=>n instanceof HTMLElement||document.querySelector(n)!==null).length===i.visible.length)||i.callbacks.forEach(s=>{typeof s.action=="string"?this.processSingleAction({action:s.action.trim(),callback:s.callback}):typeof s.action=="object"&&s.action!==null&&s.action.length>0&&s.action.forEach(n=>{this.processSingleAction({action:n.toString().trim(),callback:s.callback})})})}}processSingleAction({action:e,callback:t}){const i=e.split("+"),s={ctrlKey:!1,altKey:!1,shiftKey:!1};i.forEach(r=>{switch(r){case"ctrl":s.ctrlKey=!0;break;case"alt":s.altKey=!0;break;case"shift":s.shiftKey=!0;break}});const n=i.filter(r=>!["ctrl","alt","shift"].includes(r));this.executeCallback({event,combinableKeys:s,callback:t,key:n[0]})}executeCallback({event:e,callback:t,combinableKeys:i,key:s}){if(e.key!==void 0&&e.key.toLowerCase()===s.toLowerCase()){let n=!0;for(let r in i)e[r]!==i[r]&&(n=!1);n&&t(e,s)}}create(e){return this.listeners[e]=new o}destroy(e){delete this.listeners[e]}}class o{constructor(){c(this,"visible",[]);c(this,"hidden",[]);c(this,"callbacks",[])}whenVisible(e){return typeof e=="object"?this.visible.push(...e):this.visible.push(e),this}clearVisible(){return this.visible=[],this}whenNotVisible(e){return e.length>0?this.hidden.push(...e):this.hidden.push(e),this}clearHidden(){return this.hidden=[],this}whenPressed(e,t){return this.callbacks.push({action:e,callback:t}),this}clearCallbacks(){return this.callbacks=[],this}getConfig(){return{callbacks:this.callbacks,hidden:this.hidden,visible:this.visible}}}export{u as N};
